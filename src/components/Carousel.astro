---
import Carousel_cards from "../components/Carousel_cards.astro"
---
<section class="mx-3xl py-xl">
    <h1 class="text-xxxlarge font-display text-center pb-xs">HØJSKOLE OPHOLD</h1>

    <!-- 45 to 80 characters (per line) -->
    <p class="text-center w-[80ch] mx-auto">Der venter dig et unikt rejseeventyr når du tager på højskole i udlandet,
        med et stærkt sammenhold og fede rejseoplevelser. Glæd dig også til inspirerende undervisning,
        der levende og aktivt forener det lærende med det legende. Se vores eventyrlige højskoleophold i udlandet</p>
    
    <div class="carousel-container pt-sm relative flex flex-col gap-sm mx-auto">
  <div class="relative overflow-hidden w-auto hidden lg:block">
    <!-- Carousel slides -->
    <div class="carousel">
      <div class="slide active block lg:flex lg:justify-center lg:gap-x-20">
        <Carousel_cards video="src/assets/videos/hawaii.mp4" caption="Caribien, Hawaii & Mexico"></Carousel_cards>
        <Carousel_cards video="src/assets/videos/colombia.mp4" caption="Costa Rica, Mexico & Columbia" preload="none"></Carousel_cards>
        <Carousel_cards video="src/assets/videos/japan.mp4" caption="Australien, Japan, Bali & Gili Islands" preload="none"></Carousel_cards>
      </div>
      
      <div class="slide hidden lg:flex lg:justify-center lg:gap-x-20">
        <Carousel_cards video="src/assets/videos/new_zealand.mp4" caption="Australien, New Zealand, Bali & Gili Islands" preload="none"></Carousel_cards>
        <Carousel_cards video="src/assets/videos/indien.mp4" caption="Indien, Nepal, Thailand, Vietnam & Sri Lanka" preload="none"></Carousel_cards>
        <Carousel_cards video="src/assets/videos/australien.mp4" caption="Hawaii, Australien, Japan, Bali & Gili Islands" preload="none"></Carousel_cards>
      </div>

      <div class="slide hidden lg:flex lg:justify-center lg:gap-x-20">
        <Carousel_cards video="src/assets/videos/maldiverne.mp4" caption="Maldiverne, Sri Lanka, Bali & Gili Islands" preload="none"></Carousel_cards>
        <Carousel_cards video="src/assets/videos/brasilien.mp4" caption="Brasilien, Bolivia, Colombia, Ecuador, Peru & Argetina" preload="none"></Carousel_cards>
        <Carousel_cards video="src/assets/videos/bali_gili.mp4" caption="Bali, Lombok & Gili Islands" preload="none"></Carousel_cards>
      </div>
    </div>

    <!-- Prev button -->
    <button class="bg-vulcan-950* prev px-fit py-fit absolute top-[50%] outline-none border-none cursor-pointer
      transition-transform duration-[0.2s] ease-in-out left-0 active:drop-shadow-xl
      active:scale-90 hover:-translate-y-3.5 hover:scale-95">
      <img src="../images/venstre.svg" alt="svg venstre knap">
    </button>
    
    <!-- Next button -->
    <button class="bg-vulcan-950* next px-fit py-fit absolute top-[50%] outline-none border-none cursor-pointer
      transition-transform duration-[0.2s] ease-in-out right-0 active:drop-shadow-xl
      active:scale-90 hover:-translate-y-3.5 hover:scale-95">
      <img src="../images/hojre.svg" alt="svg højre knap">
    </button>

    <!-- Dots navigation -->
    <div class="dots flex items-center justify-center gap-xs"></div>
  </div>
</div>

<!-- Carousel script (to handle the active classes and dots functionality) -->
<script>
  const prevButton = document.querySelector('.prev');
  const nextButton = document.querySelector('.next');
  const slides = document.querySelectorAll('.slide');
  const dotsContainer = document.querySelector('.dots');

  let currentIndex = 0;

  // Function to show the slide based on index
  function showSlide(index) {
    // Hide all slides
    slides.forEach((slide, i) => {
      slide.classList.add('hidden'); // hide all slides
    });

    // Show the current slide
    slides[index].classList.remove('hidden');
    slides[index].classList.add('block');

    // Update dots
    const allDots = dotsContainer.querySelectorAll('.dot');
    allDots.forEach((dot, i) => {
      dot.classList.toggle('active', i === index); // Toggle active class on dots
    });
  }

  // Previous button click
  prevButton.addEventListener('click', () => {
    currentIndex = (currentIndex === 0) ? slides.length - 1 : currentIndex - 1;
    showSlide(currentIndex);
  });

  // Next button click
  nextButton.addEventListener('click', () => {
    currentIndex = (currentIndex === slides.length - 1) ? 0 : currentIndex + 1;
    showSlide(currentIndex);
  });

  // Dots navigation (add dots dynamically)
  slides.forEach((slide, i) => {
    const dot = document.createElement('div');
    dot.classList.add('dot', 'w-2', 'h-2', 'rounded-full', 'bg-white', 'cursor-pointer');
    dot.addEventListener('click', () => {
      currentIndex = i;
      showSlide(currentIndex);
    });
    dotsContainer.appendChild(dot);
  });

  // Initial setup
  showSlide(currentIndex);
</script>
